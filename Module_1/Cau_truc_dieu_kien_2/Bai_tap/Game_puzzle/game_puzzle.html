<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ball</title>
    <style>
        td{
            height: 100px;
            width: 100px;
            border: 1px solid black;
        }
    </style>

</head>
<body onload="randomImage(),createTable()">
<div id="divMain" style="width: 1200px; height: 620px; background-color: #2e6da4">
    <img src="" alt="Ball"   id="image01" ondragstart="return false;" style="position: absolute; top: 50px; left: 50px">
    <img src="" alt="Ball"   id="image02" ondragstart="return false;" style="position: absolute; top: 150px; left: 50px">
    <img src="" alt="Ball"   id="image03" ondragstart="return false;" style="position: absolute; top: 250px; left: 50px">
    <img src="" alt="Ball"   id="image04" ondragstart="return false;" style="position: absolute; top: 350px; left: 50px">
    <img src="" alt="Ball"   id="image05" ondragstart="return false;" style="position: absolute; top: 450px; left: 50px">
    <img src="" alt="Ball"   id="image06" ondragstart="return false;" style="position: absolute; top: 50px; left: 150px">
    <img src="" alt="Ball"   id="image07" ondragstart="return false;" style="position: absolute; top: 150px; left: 150px">
    <img src="" alt="Ball"   id="image08" ondragstart="return false;" style="position: absolute; top: 250px; left: 150px">
    <img src="" alt="Ball"   id="image09" ondragstart="return false;" style="position: absolute; top: 350px; left: 150px">
    <table id="tbl1" style="position: absolute; left: 400px"></table>
</div>
<script>
    // For random image
    function randomImage(){
        for (let i=1; i<10; i++){
            let random = Math.floor(Math.random() * 9)+1;
            document.getElementById("image0" + i.toString()).src= "./image/image_part_00" + random.toString() + ".jpg";
        }
    }
    // For move image
    let gMouseDownX = 0;
    let gMouseDownY = 0;
    let gMouseDownOffsetX = 0;
    let gMouseDownOffsetY = 0;
    let idImage;
    for(let i=1; i<10; i++) {
        document.getElementById('image0' + i.toString()).addEventListener('mousedown', e => {
            mouseDown(e, 'image0' + i.toString());
        }, false);
    }
    document.getElementById("tbl1").addEventListener('mousedown', e=>{
        mouseDown(e, idImage);
    }, false);
    window.addEventListener('mouseup', e=>{
        window.removeEventListener('mousemove', divMove, true);
    }, false);

    function mouseDown(e, getId) {
        gMouseDownX = e.clientX;
        gMouseDownY = e.clientY;
        idImage = getId;
        // console.log(idImage);
        let div = document.getElementById(getId);

        //The following block gets the X offset (the difference between where it starts and where it was clicked)
        let leftPart = "";
        if(!div.style.left)
            leftPart+="0px";    //In case this was not defined as 0px explicitly.
        else
            leftPart = div.style.left;
        let leftPos = leftPart.indexOf("px");
        let leftNumString = leftPart.slice(0, leftPos); // Get the X value of the object.
        gMouseDownOffsetX = gMouseDownX - parseInt(leftNumString,10);

        //The following block gets the Y offset (the difference between where it starts and where it was clicked)
        let topPart = "";
        if(!div.style.top)
            topPart+="0px";     //In case this was not defined as 0px explicitly.
        else
            topPart = div.style.top;
        let topPos = topPart.indexOf("px");
        let topNumString = topPart.slice(0, topPos);    // Get the Y value of the object.
        gMouseDownOffsetY = gMouseDownY - parseInt(topNumString,10);

        window.addEventListener('mousemove', divMove, true);
    }

    function divMove(e){
        // console.log(idImage);
        let div = document.getElementById(idImage);
        div.style.position = 'absolute';
        let topAmount = e.clientY - gMouseDownOffsetY;
        div.style.top = topAmount + 'px';
        let leftAmount = e.clientX - gMouseDownOffsetX;
        div.style.left = leftAmount + 'px';
    }
    // For table
    function createTable() {
        let table = document.getElementById("tbl1");
        for(let i=0; i<3; i++){
            let addRow = table.insertRow(i);
            for(let j=0; j<3; j++){
                let addCell = addRow.insertCell(j);
                addCell.innerHTML = "1";
            }
        }
    }
</script>
</body>
</html>